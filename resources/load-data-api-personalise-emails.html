<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">

<!-- Mirrored from www.getvero.com/resources/load-data-api-personalise-emails by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Dec 2018 15:28:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head >
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Load data from APIs to personalize your email marketing</title>

<!-- This site is optimized with the Yoast SEO plugin v8.2.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="How to load weather, location and other data via API into the body of an email, and use that data to personalize what a customer will receive. Pull data from OpenWeather, Clearbit and more."/>
<link rel="canonical" href="load-data-api-personalise-emails.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Load data from APIs to personalize your email marketing" />
<meta property="og:description" content="How to load weather, location and other data via API into the body of an email, and use that data to personalize what a customer will receive. Pull data from OpenWeather, Clearbit and more." />
<meta property="og:url" content="load-data-api-personalise-emails.html" />
<meta property="og:site_name" content="Vero" />
<meta property="article:section" content="Design" />
<meta property="article:published_time" content="2018-03-30T03:14:48+11:00" />
<meta property="article:modified_time" content="2018-04-30T21:44:59+11:00" />
<meta property="og:updated_time" content="2018-04-30T21:44:59+11:00" />
<meta property="og:image" content="https://i0.wp.com/www.getvero.com/wp-content/uploads/2018/03/Fusion-illustration2x.png?fit=1200%2C630&amp;ssl=1" />
<meta property="og:image:secure_url" content="https://i0.wp.com/www.getvero.com/wp-content/uploads/2018/03/Fusion-illustration2x.png?fit=1200%2C630&amp;ssl=1" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="personalizing emails" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="How to load weather, location and other data via API into the body of an email, and use that data to personalize what a customer will receive. Pull data from OpenWeather, Clearbit and more." />
<meta name="twitter:title" content="Load data from APIs to personalize your email marketing" />
<meta name="twitter:image" content="https://i0.wp.com/www.getvero.com/wp-content/uploads/2018/03/Fusion-illustration2x.png?fit=1200%2C630&amp;ssl=1" />
<meta name="twitter:creator" content="@chexton" />
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='http://s0.wp.com/' />
<link rel='dns-prefetch' href='http://secure.gravatar.com/' />
<link rel='dns-prefetch' href='http://fast.fonts.net/' />
<link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' />
<link rel='dns-prefetch' href='http://cdn.getvero.com/' />
<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://cdn.rawgit.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Vero &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Vero &raquo; Comments Feed" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Vero &raquo; Load data from APIs to personalize your emails Comments Feed" href="load-data-api-personalise-emails/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.getvero.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='child-theme-css'  href='../wp-content/themes/vero/style8036.css?ver=1527794841' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='../wp-content/plugins/naked-social-share/assets/css/font-awesome.min1849.css?ver=4.7.0' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css-css'  href='../wp-content/plugins/wordpress-popular-posts/public/css/wpp8aee.css?ver=4.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='../wp-includes/css/dashicons.min5010.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='highlight-css-css'  href='http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/tomorrow-night-bright.min.css?ver=2.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='prism-css'  href='../wp-content/themes/vero/assets/stylesheets/prismc141.css?ver=2.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='prism-okaidia-css'  href='../wp-content/themes/vero/assets/stylesheets/prism-okaidiac141.css?ver=2.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='imgslider-style-css'  href='../wp-content/themes/vero/assets/stylesheets/imgslider-2.0.1-minc141.css?ver=2.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='custom-stylesheet-css'  href='https://cdn.getvero.com/app.min.css?ver=2.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='googlefont_merriweather-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A700%2C700italic&amp;ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='bxslider-style-css'  href='../wp-content/themes/vero/assets/stylesheets/jquery.bxslider5010.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='featherlight-style-css'  href='http://cdn.rawgit.com/noelboss/featherlight/1.7.0/release/featherlight.min.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widget-social-icons-styles-css'  href='../wp-content/plugins/jetpack/modules/widgets/social-icons/social-iconsf4df.css?ver=20170506' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../wp-content/plugins/jetpack/css/jetpack8f99.css?ver=6.5' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wpp_params = {"sampling_active":"0","sampling_rate":"100","ajax_url":"https:\/\/www.getvero.com\/wp-json\/wordpress-popular-posts\/v1\/popular-posts\/","action":"update_views_ajax","ID":"7639","token":"87109256d6","debug":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/wordpress-popular-posts/public/js/wpp-4.1.0.min8aee.js?ver=4.1.2'></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.getvero.com/wp-content/themes/genesis/lib/js/html5shiv.min.js?ver=3.7.3'></script>
<![endif]-->
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/fout.js'></script>
<script type='text/javascript' src='http://fast.fonts.net/jsapi/bd23cf03-685d-4ec1-b306-4adae883ab02.js'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='https://wp.me/p6YSXu-1Zd' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed4ed6.json?url=https%3A%2F%2Fwww.getvero.com%2Fresources%2Fload-data-api-personalise-emails" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed172e?url=https%3A%2F%2Fwww.getvero.com%2Fresources%2Fload-data-api-personalise-emails&amp;format=xml" />

<link rel='dns-prefetch' href='http://v0.wordpress.com/'/>
<link rel='dns-prefetch' href='http://i0.wp.com/'/>
<link rel='dns-prefetch' href='http://i1.wp.com/'/>
<link rel='dns-prefetch' href='http://i2.wp.com/'/>
<style type='text/css'>img#wpstats{display:none}</style><link rel="icon" href="../wp-content/themes/vero/assets/images/home/favicon/64.png" />
<link rel="pingback" href="../xmlrpc.php" />
<!-- Google Tag Manager -->
<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-M8KWK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M8KWK');</script>
<!-- End Google Tag Manager --></head>
<body class="post-template-default single single-post postid-7639 single-format-standard header-full-width full-width-content" itemscope itemtype="https://schema.org/WebPage"><div class="site-container"><nav class="nav-primary" aria-label="Main" itemscope itemtype="https://schema.org/SiteNavigationElement"><div class="wrap">  <ul id="menu-marketing-navbar-left" class="menu">
    <li id="logo" class="menu-item menu-item-type-custom menu-item-object-custom"><a href="../index.html"><img data-no-retina src="../wp-content/themes/vero/assets/images/home/logo/logo.jpeg" width="104" ></a></li>
    <li><a href="../careers/index.html" class="hiring-pill">We're Hiring!</a></li>
  </ul>
  <ul id="menu-marketing-navbar-right" class="menu genesis-nav-menu menu-primary"><li id="menu-item-7514" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7514"><a title="Features" href="../features/index.html" itemprop="url"><span itemprop="name">Features</span></a></li>
<li id="menu-item-2169" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2169"><a href="../features/email/index.html" itemprop="url"><span itemprop="name">More</span></a>
<ul class="sub-menu">
	<li id="menu-item-7751" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7751"><a href="../workflows/index.html" itemprop="url"><span itemprop="name">Workflows</span></a></li>
	<li id="menu-item-7601" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7601"><a href="../event-manager/index.html" itemprop="url"><span itemprop="name">Event Management</span></a></li>
	<li id="menu-item-7502" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7502"><a href="../fusion/index.html" itemprop="url"><span itemprop="name">Fusion</span></a></li>
	<li id="menu-item-7480" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7480"><a href="../multi-language-campaigns/index.html" itemprop="url"><span itemprop="name">Multi-language Campaigns</span></a></li>
	<li id="menu-item-7600" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7600"><a href="../reporting/index.html" itemprop="url"><span itemprop="name">Reporting</span></a></li>
</ul>
</li>
<li id="menu-item-2026" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2026"><a href="http://help.getvero.com/" itemprop="url"><span itemprop="name">Help</span></a></li>
<li id="menu-item-2120" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2120"><a href="index.html" itemprop="url"><span itemprop="name">Blog</span></a></li>
<li id="menu-item-2025" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2025"><a href="../pricing.html" itemprop="url"><span itemprop="name">Pricing</span></a></li>
<li id="menu-item-429" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-429"><a href="https://app.getvero.com/login" itemprop="url"><span itemprop="name">Log In</span></a></li>
<li id="menu-item-2119" class="btn btn-success menu-item menu-item-type-custom menu-item-object-custom menu-item-2119"><a title="button" href="https://app.getvero.com/signup" itemprop="url"><span itemprop="name">Start a free trial</span></a></li>
</ul>  <div class="nav-menu-toggle"><a href="#">Menu</a></div>
  </div></nav>
    <div id="blog-sub-menu" class="bottom-border-light">
      <div class="categories">
        <div class="category-button"><span class="fa fa-angle-down"></span></div>
        <ul id="categories-menu">
          <li class=""><a href="index.html">All</a></li>
          <li class=""><a href="category/vero-updates/index.html">Vero Updates</a></li>
          <li class=""><a href="category/how-to/index.html">How To's</a></li>
          <li class=""><a href="category/case-studies/index.html">Case Studies</a></li>
          <!-- <li class=""><a href="/resources/category/case-studies">Product Updates</a></li> -->
        </ul>
      </div>
      <form class="search-form" itemprop="potentialAction" itemscope itemtype="https://schema.org/SearchAction" method="get" action="https://www.getvero.com/" role="search"><meta itemprop="target" content="https://www.getvero.com/?s={s}"/><input itemprop="query-input" type="text" name="s" placeholder="Search the blog..." /><input type="submit" value="Search"  /></form>    </div>

  <div class="site-inner"><div class="content-sidebar-wrap">    <a href="index.html" class="back-to-blog"><span class="fa fa-long-arrow-left"></span>Back to Blog</a>
  <main class="content"><article class="post-7639 post type-post status-publish format-standard has-post-thumbnail category-design entry" itemscope itemtype="https://schema.org/CreativeWork"><header class="entry-header"><h1 class="entry-title" itemprop="headline">Load data from APIs to personalize your emails</h1>
  <p class="entry-meta">
          <a href="category/email-marketing/design/index.html">Design</a>
        Written On
    <time class="entry-time" itemprop="datePublished" datetime="2015-05-06T06:33:11+00:00">
      30 March, 2018    </time> 
    by 
    <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
      Chris Hexton    </span> 
  </p>
        <img src="../wp-content/uploads/2018/03/Fusion-illustration2x.png">
          <div class='shares-block'>
        <!-- <div class='total-shares'>
          <span>0</span>Shares
        </div> -->
        		<div class="naked-social-share nss-update-share-numbers" data-post-id="7639">
			<ul>
																				<li class="nss-twitter">
								<a href="http://www.twitter.com/intent/tweet?url=https%3A%2F%2Fwww.getvero.com%2Fresources%2Fload-data-api-personalise-emails&amp;via=getvero&amp;text=Load+data+from+APIs+to+personalize+your+emails" target="_blank">
									<i class="fa fa-twitter"></i>									<span class="nss-site-name">Twitter</span>
																	</a>
							</li>
																			<li class="nss-facebook">
								<a href="http://www.facebook.com/sharer/sharer.php?u=https://www.getvero.com/resources/load-data-api-personalise-emails&amp;t=Load+data+from+APIs+to+personalize+your+emails" target="_blank">
									<i class="fa fa-facebook"></i>									<span class="nss-site-name">Facebook</span>
																	</a>
							</li>
																			<li class="nss-linkedin">
								<a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.getvero.com%2Fresources%2Fload-data-api-personalise-emails&amp;title=Load+data+from+APIs+to+personalize+your+emails&amp;source=Vero" target="_blank">
									<i class="fa fa-linkedin"></i>									<span class="nss-site-name">LinkedIn</span>
																	</a>
							</li>
														</ul>
		</div>
		      </div>
    </header><div class="entry-content" itemprop="text"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><p>Learn how to load weather, location and other data via APIs into the body of an email and use that data to personalize what a customer will receive.</p>
<p>This is an example of a welcome email campaign (perhaps a little exaggerated!) that includes details about the weather at the recipient&rsquo;s location, a map of their city and details on their nearest Vero support contact (based on our support team members in the US, EU, and Australia).</p>
<p><a href="https://veropublic.wpengine.com/fusion"><img data-attachment-id="7641" data-permalink="https://www.getvero.com/resources/load-data-api-personalise-emails/small-top2x/" data-orig-file="https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?fit=1516%2C2220&amp;ssl=1" data-orig-size="1516,2220" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Fusion email" data-image-description="" data-medium-file="https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?fit=205%2C300&amp;ssl=1" data-large-file="https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?fit=699%2C1024&amp;ssl=1" src="https://i2.wp.com/veropublic.wpengine.com/wp-content/uploads/2018/03/Small-Top@2x.png?resize=1516%2C2220&amp;ssl=1" alt="Fusion email" width="1516" height="2220" class="aligncenter size-full wp-image-7641" srcset="https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?w=1516&amp;ssl=1 1516w, https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?resize=205%2C300&amp;ssl=1 205w, https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?resize=768%2C1125&amp;ssl=1 768w, https://i2.wp.com/www.getvero.com/wp-content/uploads/2018/03/Small-Top@2x.png?resize=699%2C1024&amp;ssl=1 699w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"></a></p>
<h2>What&rsquo;s so special about personalizing emails with data loaded from APIs?</h2>
<p>What&rsquo;s special here is that the data being loaded and the decisions on which content to render and how to render it is handled <strong>at send time</strong>. The data is loaded dynamically in real time for each individual recipient &ndash; this is a very powerful thing.</p>
<p>Whether you&rsquo;re an engineer, a product manager or a marketer, you&rsquo;ve probably encountered one of these scenarios:</p>
<ol><li>You need to access data for your emails but that data <strong>changes frequently</strong> (product inventory, latest product releases, price changes) and this data is only pushed into your email marketing tool on a daily basis or when customers happen to log in.</li>
<li>You need access to data for each individual user and that data needs to be (or is best) <strong>generated</strong> &ldquo;on the fly&rdquo; (dynamic coupons, an invite code, a map).</li>
<li>You need access to data that is the result of a <strong>complex algorithmic</strong> or analytic process (user-level recommendations, counts on large data stores, etc.).</li>
<li>You have an internal API you&rsquo;ve <strong>already built</strong> out that contains all of the user data you might want in order to personalise an email, but writing middleware to push this data into an email tool is complex, unwarranted or will result in data being out of sync with the internal API.</li>
<li>You can combine internal data already in your email tool with <strong>data loaded directly from a third party</strong> (weather, another vendor) to get the desired result, saving you building your own middleware.</li>
</ol><p>If so, <a href="https://veropublic.wpengine.com/fusion">Fusion</a> is a solution we&rsquo;ve built to help ensure you&rsquo;ve got access to the data in all of the scenarios above.</p>
<p>We think Fusion is pretty special in helping us help you achieve your personalization goals.</p>
<h2>How we set this up</h2>
<p>Here&rsquo;s the <a href="https://github.com/getvero/fusion-welcome-email">HTML of the email</a> we&rsquo;re using in Vero to build out this example.</p>
<p>This file is made up of two main components.</p>
<h3>1. Loading in the required data</h3>
<p>Vero uses the open-source <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">Liquid</a> templating language in order to customise email content.</p>
<p>One of Liquid&rsquo;s most powerful features is the <code>capture</code> function (<a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers#variable-assignment">more here</a>). In this example we&rsquo;re using a combination of Vero&rsquo;s custom <code>fetch_json</code> method, which loads a remote <code>JSON</code> data feed into the outgoing email and the Liquid <code>capture</code> function in order to load all of the data we&rsquo;ll use in the body of the email.</p>
<p>As a first step, we&rsquo;ll use Fusion in conjunction with <a href="https://clearbit.com/">Clearbit</a> in order to load the user&rsquo;s demographic data. We&rsquo;ll then use <code>capture</code> to store the user&rsquo;s city and country in a format we can use with weather and mapping APIs.</p>
<pre><code>&lt;!-- Get information about the user from Clearbit --&gt;
  {%fetch_json clearbit = 'https://REDACTED:""@person.clearbit.com/v1/people/email/{{user.email}}'%}

  &lt;!-- Set the location variable as we want to use it for other API requests (and in the copy!) --&gt;
  {%capture location%}{{json.clearbit.geo.city}}, {{json.clearbit.geo.country}}{%endcapture%}
</code></pre>
<p>This will output something like <code>Sydney, Australia</code> for my test user (<code>chris@getvero.com</code>).</p>
<p>We then build on this by using a combination of a weather API to get the current weather data in the user&rsquo;s city.</p>
<pre><code>&lt;!-- Get weather data --&gt;
  {%fetch_json weather = 'http://api.openweathermap.org/data/2.5/weather?q={{location}}&amp;amp;APPID=REDACTED'%}
</code></pre>
<p>These are some nice, clean examples of using Vero&rsquo;s Fusion functionality and some of Liquid&rsquo;s basic functionality. We use the data we&rsquo;ve fetched above to insert a map, which Google cleverly lets us do in a raw <code>&lt;img&gt;</code> attribute.</p>
<pre><code>&lt;img src="https://maps.googleapis.com/maps/api/staticmap?center={{location}}&amp;amp;zoom=14&amp;amp;size=600x250&amp;amp;key=REDACTED&amp;amp;markers=color:red|{{location}}"&gt;&lt;/p&gt;
</code></pre>
<p>We also use it to insert the weather and a weather icon.</p>
<pre><code>&lt;p&gt;At Vero, we're all about personalisation. In this email we wanted to show you a little of what's possible. For example, when we sent you this email we could see that it was &lt;strong&gt;{{json.weather["main"]["temp"]}}&Acirc;&deg;F&lt;/strong&gt; with you &acirc;&#128;&#147;&nbsp;"{{json.weather.weather.first.description}}" according to the weather report! &lt;img src="http://openweathermap.org/img/w/{{json.weather.weather.first.icon}}.png"&gt;.&lt;/p&gt; 
</code></pre>
<p>To really show off what Liquid rendering can do when it comes to personalisation given the full power of a JSON feed at your command, the final part of our example results in simple content output displaying how far the user who has signed up is from our a local support team member at Vero but uses some complex logic.</p>
<p>To do this we: </p>
<ul><li>We <code>assign</code> an array with three of our top locations with support team members.</li>
<li>We use Google&rsquo;s Distances API to get the distance of each support member in the above array from the user who has signed up. This results in either a distance result in miles, where Google can find the distance (generally requires a road connection in order to work!) or nothing.
<p>        <!-- Get distances --></p>
<pre><code>  {%fetch_json distances = 'https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&amp;amp;origins={{location}}&amp;amp;destinations=Seattle,USA|Brisbane,Australia|Amsterdam,Netherlands&amp;amp;travelMode=Driving&amp;amp;key=REDACTED'%}
        </code></pre>
</li>
<li>We iterate through the three possible options and find the minimum distance (i.e. the closest team member).
<p>        <!-- Find local support contact --></p>
<pre><code>  {%assign min_value = 0%}
          {%assign min_index = 0%}
          {%for row in json.distances.rows.first.elements%} 
            {%unless row.status == 'ZERO_RESULTS'%}
              {%if forloop.index0 == 01%}
                {%assign min_value = row.distance.value%}
                {%assign min_index = forloop.index%}
              {%elsif forloop.index0 != 01 and row.distance.value &lt; min_value%}
                {%assign min_value = row.distance.value%}
                {%assign min_index = forloop.index%}
              {%endif%}
            {%endunless%}
          {%endfor%}
          {%assign actual_index = min_index|minus:1%}
        </code></pre>
</li>
<li>We assign the index of that team member in the assigned array, so that we can refer to the details of the array later.</li>
</ul><p>This then enables us to print out the city of the closest support representative and how far away that is in miles:</p>
<pre><code>As we mentioned, we're based all over the world. One reason for this is we want to provide our customers with the best support possible. From where you are, your nearest support contact is based in {{json.distances.destination_addresses[actual_index]}} &acirc;&#128;&#147; that's <strong>{{json.distances.rows.first.elements[actual_index].distance.text}}</strong> away! We've got team members in Australia, the Netherlands and the USA to help out when it comes to support.
</code></pre>
<p>The result is a super personal email that has been built <strong>on the fly</strong> by Vero&rsquo;s rendering engine, thanks to the power of APIs and Liquid.</p>
<h2>Try it yourself</h2>
<p>You can learn more about <a href="https://veropublic.wpengine.com/fusion">Fusion here</a>.</p>
<p>To get this example set up in your own account:</p>
<ol><li>Sign up to a Vero <a href="https:///app.getvero.com/signup">trial account</a></li>
<li>Add at least one test user in your account &ndash; you can easliy do this by using Vero&rsquo;s <a href="https://help.getvero.com/articles/import-a-list-of-customers-via-csv.html">CSV importer</a>. You will want to ensure that this test user is a valid business user for which Clearbit returns valid data.</li>
<li>Sign up to <a href="https://clearbit.com/">Clearbit</a>, the <a href="https://openweathermap.org/">OpenWeatherMap API</a> and check out <a href="https://developers.google.com/maps/">Google&rsquo;s API</a>.</li>
<li>Create a new draft campaign (try a <em>Newsletter</em> to get started).</li>
<li>Use the <em>Custom HTML</em> layout and copy in the example HTML we&rsquo;ve provided.</li>
<li>Save the email and use the <em>Preview in browser</em> function to fully render an example version of the email (make sure you preview <em>as the test user</em> in order to render things correctly).</li>
<li>Voila!</li>
</ol><p>Remember: bad emails feel &ldquo;clunky&rdquo;. Great emails:</p>
<ul><li>inform your customers</li>
<li>make sense based on their other interactions with your business, and</li>
<li>are &ldquo;just another part of your customer experience&rdquo;.</li>
</ul><p>To make an email great, you need data. Not only data about who your customer is, but data about their touch points with your business, data that relates to their location or position, or data related to your business (new releases, inventory, metrics, etc.). Fusion is a powerful tool that will help you achieve this.</p>
<p>Find out more about <a href="https://veropublic.wpengine.com/fusion">Fusion</a>.</p></body>
<!-- Mirrored from www.getvero.com/resources/load-data-api-personalise-emails by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Dec 2018 15:29:01 GMT -->
</html>
<!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="https://www.getvero.com/resources/load-data-api-personalise-emails"
    dc:identifier="https://www.getvero.com/resources/load-data-api-personalise-emails"
    dc:title="Load data from APIs to personalize your emails"
    trackback:ping="https://www.getvero.com/resources/load-data-api-personalise-emails/trackback/" />
</rdf:RDF>-->
</div>    <div class='subscribe-form center-block'>
      <h2>Get our latest blog posts,<br>product news and tips straight to your inbox.</h2>
      <form action='https://app.getvero.com/forms/0eefc98b2dc881e7c0888ae698833577' method='post'>
          <input id="footer-email-address"  name='email' type='email' class="form-control" placeholder="email@address.com"></input>
          <input name='redirect_on_success' type='hidden' value='https://veropublic.wpengine.com/subscribed-to-the-blog/' />
          <input name='user[consent_marketing]' type='hidden' value='true' />
          <input name='user[consent_product_updates]' type='hidden' value='true' />
          <input type='submit' value='Subscribe' class="btn btn-success left-margin-tiny"/>
      </form>
      <p class="mini">By subscribing, you consent to let Vero send you messages regarding marketing and product. You can learn more in our <a href="../privacy/index.html" target="_blank">Privacy Notice</a>, and you can opt out or change your consent at any time.</p>
    </div>
  <footer class="entry-footer"></footer></article>
<div id="disqus_thread"></div>
</main><aside class="widget-area"><section id="text-9" class="widget-odd widget-last widget-first widget-1 subscribe widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Subscribe for updates</h4>
			<div class="textwidget"><p>Get our latest blog posts, product news and tips straight to your inbox.</p>
<form class="mini-subscribe" action='https://app.getvero.com/forms/0eefc98b2dc881e7c0888ae698833577' method='post'>
  <input id="sidebar-email-address" class="email-add form-control" name='email' type='email' placeholder="Email Address" />
<input name='redirect_on_success' type='hidden' value='https://veropublic.wpengine.com/subscribed-to-the-blog/' />
<input name='user[consent_marketing]' type='hidden' value='true' />
<input name='user[consent_product_updates]' type='hidden' value='true' />
<input type="submit" class="btn btn-success" value="Subscribe">
</form>
<p class="mini">By subscribing, you consent to let Vero send you messages regarding marketing and product. You can learn more in our <a href="https://veropublic.wpengine.com/privacy" target="_blank">Privacy Notice</a>, and you can opt out or change your consent at any time.</p></div>
		</div></section>
</aside></div></div><footer class="site-footer" itemscope itemtype="https://schema.org/WPFooter"><div class="wrap">  <section id="call-to-action" class="center-text dark-box">
    <div class="inner">
      <h1 class="cta-title">Put your data first and craft better product experiences</h1>
      <p class="sub-heading">Create a free account, import your data and see how Vero can help your team.</p>
      <a class="btn btn-success btn-large btn-wide" href="http://app.getvero.com/signup">Get started</a>
    </div>
  </section>
    <div class="main-footer">
      <ul class="col">
    <li id="logo"><a href="../index.html"><img src="../wp-content/themes/vero/assets/images/home/logo/logo-white.svg" width="104"></a></li>
  </ul>
  <ul class="col">
    <li class="header">Product</li>
    <li><a href="../features/index.html">Features</a></li>
    <li><a href="../workflows/index.html">Workflows</a></li>
    <li><a href="../event-manager/index.html">Event Management</a></li>
    <li><a href="../fusion/index.html">Fusion</a></li>
    <li><a href="../multi-language-campaigns/index.html">Multi-language</a></li>
    <li><a href="../reporting/index.html">Reporting</a></li>
    <li><a href="../integrations/vero-segment/index.html">Vero &plus; Segment</a></li>
    <li><a href="../integrations/vero-stitch/index.html">Vero &plus; Stitch</a></li>
    <li><a href="../integrations/vero-snowplow/index.html">Vero &plus; Snowplow</a></li>
    <li><a href="../pricing.html">Pricing</a></li>
  </ul>
  <ul class="col">
    <li class="header">Resources</li>
    <!--<li>About</li>-->
    <li><a href="index.html" target="_blank">Blog</a></li>
    <li ><a href="../email-personalization-liquid-guide.html" target="_blank">Liquid Guide</a></li>
    <li><a href="https://help.getvero.com/" target="_blank">Help Center</a></li>
    <li><a href="https://developers.getvero.com/" target="_blank">API Reference</a></li>
    <li><a href="https://releasenotes.getvero.com/" target="_blank">Release Notes</a></li>
    <li><a href="https://status.getvero.com/" target="_blank">Status</a></li>
  </ul>
  <ul class="col">
    <li class="header">Company</li>
    <li><a href="../careers/index.html">Careers</a><a href="../careers/index.html" class="hiring-pill left-margin-tiny">We're Hiring!</a></li>
    <li><a href="../terms-of-service/index.html">Terms of Service</a></li>
    <li><a href="../privacy/index.html">Privacy Policy</a></li>
    <li><a href="../gdpr/index.html">GDPR</a></li>
    <li><a href="https://twitter.com/getvero" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @getvero</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li>
  </ul>
    </div>
</div></footer></div><script data-cfasync="false">
  document.onreadystatechange = function () {
    if (document.readyState == "complete") {
      var logout_link = document.querySelectorAll('a[href*="wp-login.php?action=logout"]');
      if (logout_link) {
        for(var i=0; i < logout_link.length; i++) {
          logout_link[i].addEventListener( "click", function() {
            Intercom('shutdown');
          });
        }
      }
    }
  };
</script>
<script data-cfasync="false">
  window.intercomSettings = {"app_id":"i8y1wtxu"};
</script>
<script data-cfasync="false">(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/i8y1wtxu';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>	<div style="display:none">
	</div>
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='https://www.getvero.com/wp-content/plugins/jetpack/modules/carousel/jetpack-carousel-ie8fix.css?ver=20121024' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='../wp-content/plugins/jetpack/_inc/build/photon/photon.minb3d9.js?ver=20130122'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"theveroblog"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/disqus-comment-system/public/js/comment_count952b.js?ver=3.0.16'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.16"},"disqusIdentifier":"7639 https:\/\/veropublic.wpengine.com\/?p=7639","disqusShortname":"theveroblog","disqusTitle":"Load data from APIs to personalize your emails","disqusUrl":"https:\/\/www.getvero.com\/resources\/load-data-api-personalise-emails","postId":"7639"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/disqus-comment-system/public/js/comment_embed952b.js?ver=3.0.16'></script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201850'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var NSS = {"ajaxurl":"https:\/\/www.getvero.com\/wp-admin\/admin-ajax.php","disable_js":"","nonce":"4c170e1f4d"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/naked-social-share/assets/js/naked-social-share.min1159.js?ver=1.4.2'></script>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2018Decaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/modules/wpgroho5010.js?ver=4.9.8'></script>
<script type='text/javascript' src='../wp-includes/js/comment-reply.min5010.js?ver=4.9.8'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/jquery.waypoints.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/scripts.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/dev_message.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/jquery.bxslider.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/featherlight.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/picturefill.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/jquery.parallax-scroll.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/prism.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/jquery.cookie.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/jquery.leanModal.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/smooth-scroll.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/homepage.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/features.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/pricing.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/blog.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/vendor/imgslider.min.js'></script>
<script type='text/javascript' src='../wp-content/themes/vero/assets/scripts/landing-pages.js'></script>
<script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min5010.js?ver=4.9.8'></script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/_inc/build/spin.min4e44.js?ver=1.3'></script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/_inc/build/jquery.spin.min4e44.js?ver=1.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/www.getvero.com\/wp-admin\/admin-ajax.php","nonce":"888d1c4d0f","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/www.getvero.com\/wp-login.php?redirect_to=https%3A%2F%2Fwww.getvero.com%2Fresources%2Fload-data-api-personalise-emails","blog_id":"1","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/jetpack/_inc/build/carousel/jetpack-carousel.mina4d5.js?ver=20170209'></script>
<script type='text/javascript' src='https://stats.wp.com/e-201850.js' async='async' defer='defer'></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:6.5',blog:'103168960',post:'7639',tz:'11',srv:'www.getvero.com'} ]);
	_stq.push([ 'clickTrackerInit', '103168960', '7639' ]);
</script>
</body></html>
